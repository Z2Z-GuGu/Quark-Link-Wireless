# Flash与EEPROM测试

## EEPROM

+ 4/18 
+ 测试1024byte数据：
  + 读取时间：434us
  + 写入时间：5.6us
  + 擦除时间：10us
+ 计算得写入最快速度：182857 Byte/s
+ 实测最适合UART频率：1500000bps - 142857 Byte/s
+ 测试写入操作是否可以覆盖原数据：不可以
  + 发现一个有趣的现象：写成F（1111）的单元可以直接写入新数而不需要清零
    + 如0xff写入0x3f，再写入0x45，读取的数据将会是0x35;
  + 意味着可以通过单元内是否为全0xff判断该区域是否用完
  + 进一步实验知：其实不一定是f（1111）也可以是单位的（1），即EEPROM只能用来写0，恢复需要使用擦除函数
+ 单页最小擦除数量测试：EEPROM_PAGE_SIZE = 256；

## CODE FLASH

+ 速度与EEPROM相当
+ VERIFY速度：483us
+ 测试写入操作是否可以覆盖原数据：不可以
  + 与EEPROM不同，覆盖式写法直接导致部分数据丢失
+ DATA和CODE区读写函数不能越界，否则导致重启
+ CH571的CODE区不局限于 0x00000000-0x0002FFFF（192K），只是0x0002FFFF-0x0006FFFF不能保证全部有效，一般还是可以用的（至少我测试的没问题）